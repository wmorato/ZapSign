<!-- D:\Projetos\DesafioTecnico\ZapSign\frontend\src\app\core\components\feedback-modal\feedback-modal.component.html -->
<div class="modal-overlay" (click)="onClose()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <h3>Envie seu Feedback</h3>
            <button (click)="onClose()" class="btn-close">X</button>
        </div>

        <div *ngIf="isSubmitted" class="success-message">
            <p><strong>Agradecemos o seu contato!</strong></p>
            <p>Sua mensagem será avaliada pelo nosso time e entraremos em contato se for necessário para
                esclarecimentos.</p>
            <button (click)="onClose()" class="btn-primary">Fechar</button>
        </div>

        <form [formGroup]="feedbackForm" (ngSubmit)="onSubmit()" *ngIf="!isSubmitted">
            <div class="form-group">
                <label for="name">Nome:</label>
                <input id="name" type="text" formControlName="name" /> <!-- CORREÇÃO: Removido 'disabled' -->
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input id="email" type="email" formControlName="email" /> <!-- CORREÇÃO: Removido 'disabled' -->
            </div>

            <div class="form-group">
                <label for="contactType">Tipo de Contato:</label>
                <select id="contactType" formControlName="contactType">
                    <option value="Elogio">Elogio</option>
                    <option value="Critica">Crítica</option>
                    <option value="Sugestao de melhoria">Sugestão de melhoria</option>
                </select>
            </div>

            <div class="form-group">
                <label for="message">Mensagem:</label>
                <textarea id="message" formControlName="message" rows="5"
                    placeholder="Descreva seu feedback aqui..."></textarea>
                <div *ngIf="feedbackForm.get('message')?.invalid && feedbackForm.get('message')?.touched"
                    class="invalid-feedback">
                    A mensagem é obrigatória e deve ter no mínimo 10 caracteres.
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" class="btn-secondary" (click)="onClose()">Cancelar</button>
                <button type="submit" class="btn-primary" [disabled]="feedbackForm.invalid">Enviar Feedback</button>
            </div>
        </form>
    </div>
</div>